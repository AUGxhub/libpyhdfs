		libpyhdfs installation


 step by step
 ------------

** install Java SDK 6
   # apt-get install sun-java6-jdk
   
   
** get hadoop-0.20.1
 $ wget http://labs.xiaonei.com/apache-mirror/hadoop/core/hadoop-0.20.1/hadoop-0.20.1.tar.gz
 $ tar xzf hadoop-0.20.1.tar.gz
 
 
** install libpyhdfs 
  $ svn co http://libpyhdfs.googlecode.com/svn/trunk/ libpyhdfs
  $ cd hadoop-0.20.1
  $ cp c++/Linux-i386-32/lib/libhdfs.so.0 hadoop-0.20.1-core.jar lib/commons-logging-1.0.4.jar ../libpyhdfs/lib
  $ cd ../libpyhdfs
  $ ln -s libhdfs.so.0 lib/libhdfs.so
  
  # python setup.py install --prefix=/usr/local

  If you see the following error:
/usr/lib/jvm/java-6-sun/include/jni.h:27:20: error: jni_md.h: No such file or directory

Edit /usr/lib/jvm/java-6-sun/include/jni.h
change  - 27 #include "jni_md.h"
into    + 27 #include "linux/jni_md.h"

ses https://bugs.launchpad.net/ubuntu/+source/sun-java6/+bug/390290
Debian has the same problem.

** Setting CLASSPATH:
   $ export LD_LIBRARY_PATH=/usr/local/lib/pyhdfs:/usr/lib/jvm/java-6-sun/jre/lib/i386/server
   $ export CLASSPATH=/usr/local/lib/pyhdfs/hadoop-0.20.1-core.jar:/usr/local/lib/pyhdfs/commons-logging-1.0.4.jar:/etc/pyhdfs


** Run test script
   $ cd test
   $ python pyhdfs_test.py
   

 notes
 -----
 
 `install.sh' does all the steps above.

